{% extends 'TapirTemplateBundle::layout.html.twig' %} 

{% import 'YacareBaseBundle:Default:macros_yacare.html.twig' as yacare %} 

{% block pagina_titulo %}{{ res.Entidad }}{% endblock %} 

{% block pagina_contenido %}
<table class="table table-hover table-responsive">
	<tbody>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">Documento</td>
			<td>
			    {{ res.Entidad.documentoNumero }} 
    			{% if is_granted('ROLE_PERSONAS') %} 
        			<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
        			    { 'id': res.Entidad.id, 'campo_nombre': 'DocumentoNumero' })) }}" data-toggle="modal" 
        			    class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i> 
        			    {% if res.Entidad.TelefonoNumero %}Cambiar{% else %}Agregar{% endif %}
        			</a> 
                {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">CUIL/CUIT</td>
			<td>
			    {{ res.Entidad.CuiltFormateado }} 
    			{% if not res.Entidad.Cuilt|tapir_cuiltesvalida %}
    				<i class="fa fa-warning text-danger" title="La CUIL/CUIT no es válida"></i>
    			{% endif %} 
    			{% if is_granted('ROLE_PERSONAS') %} 
    				<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
    				    { 'id': res.Entidad.id, 'campo_nombre': 'Cuilt' })) }}" data-toggle="modal" 
    				    class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i> 
    				    {% if res.Entidad.Cuilt %}Cambiar{% else %}Agregar{% endif %}
    				</a> 
    		    {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">
				<i class="fa fa-home text-muted"></i>&nbsp;Domicilio</td>
			<td>
			    {{ res.Entidad.domicilio }} 
			    {% if is_granted('ROLE_PERSONAS') %} 
			    	<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
			    	    { 'id': res.Entidad.id, 'campo_nombre': 'Domicilio' })) }}" data-toggle="modal" 
			    	    class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i> 
			    	    {% if res.Entidad.Domicilio %}Cambiar{% else %}Agregar{% endif %}
			    	</a> 
			    {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">
				<i class="fa fa-phone text-muted"></i>&nbsp;Teléfono</td>
			<td>
			    {% if res.Entidad.TelefonoNumero %}
			        {{ yacare.verificacion_icono(res.Entidad.TelefonoVerificacionNivel) }}
			    {% endif %} {{ res.Entidad.TelefonoNumero }} 
			    {% if is_granted('ROLE_PERSONAS') %} 
			    	<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
			    	    { 'id': res.Entidad.id, 'campo_nombre': 'TelefonoNumero' })) }}" data-toggle="modal" 
			    	    class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i> 
			    	    {% if res.Entidad.TelefonoNumero %}Cambiar{% else %}Agregar{% endif %}
			    	</a>
			    {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">
				<i class="fa fa-envelope-o text-muted"></i>&nbsp;E-mail</td>
			<td>
			    {% if res.Entidad.Email %}
			        {{ yacare.verificacion_icono(res.Entidad.EmailVerificacionNivel)|raw }}
			    {% endif %} {{ res.Entidad.Email }}
			    {% if is_granted('ROLE_PERSONAS') %} 
			    	<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
			    	    { 'id': res.Entidad.id, 'campo_nombre': 'Email' })) }}" data-toggle="modal" 
			    	    class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i>
			    	    {% if res.Entidad.Email %}Cambiar{% else %}Agregar{% endif %}
			    	</a>
			    {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">Nacionalidad</td>
			<td>
			    {{ res.Entidad.Pais }}
			    {% if is_granted('ROLE_PERSONAS') %} 
			    	<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
			    	    { 'id': res.Entidad.id, 'campo_nombre': 'Pais' })) }}" data-toggle="modal" 
			    	    class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i> 
			    	    {% if res.Entidad.Pais %}Cambiar{% else %}Agregar{% endif %}
			    	</a>
			    {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">Fecha de nacimiento</td>
			<td>
			    {{ res.Entidad.FechaNacimiento|tapir_fecha('medium', 'none') }}
			    {% if is_granted('ROLE_PERSONAS') %} 
			    	<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
			    	    { 'id': res.Entidad.id, 'campo_nombre': 'FechaNacimento' })) }}" data-toggle="modal" 
			    	    class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i>
			    	    {% if res.Entidad.Pais %}Cambiar{% else %}Agregar{% endif %}
			    	</a> 
			    {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">Género</td>
			<td>
			    {{ res.Entidad.GeneroNombre }}
			    {% if is_granted('ROLE_PERSONAS') %} 
			    	<a href="{{ path(res.ObtenerRutaAccion('modificardato'), res.Arrastre|merge(
			    	    { 'id': res.Entidad.id, 'campo_nombre': 'Genero' })) }}" data-toggle="modal" 
			    		class="btn btn-link btn-xs showonhover"><i class="fa fa-edit"></i>
			    	    {% if res.Entidad.Pais %}Cambiar{% else %}Agregar{% endif %}
			       </a>
			    {% endif %}
			</td>
		</tr>
		<tr>
			<td class="grilladatos-etiqueta text-muted text-right">Vínculos</td>
			<td>
			    {% for Grupo in res.Entidad.Grupos %}
			    	<span class="label label-info">{{ Grupo }}</span> 
			    {% endfor %} 
			    {% if res.Entidad.PuedeAcceder %} <br />
					<span class="label label-success">Usuario {{ res.Entidad.Username }}</span>
    				{% for Rol in res.Entidad.UsuarioRoles %}
    					<span class="label label-warning">Rol {{ Rol }}</span> 
    				{% endfor %}
				{% endif %}
			</td>
		</tr>
	</tbody>
</table>
{% endblock pagina_contenido %}

{% block pagina_acciones %}
<span adata-toggle="ajax-link" onclick="return tapirAtras();"
	class="btn btn-link"><i class="fa fa-reply"></i> Volver</span>
{% endblock pagina_acciones %}

{% block pagina_acciones2 %}
    {% if is_granted('ROLE_IDDQD') %}
        <a href="{{ path(res.ObtenerRutaAccion('editar'), res.Arrastre|merge({ 'id': res.Entidad.id })) }}"
        	class="btn btn-default"><i class="fa fa-edit"></i> Editar</a>
        <a href="{{ path('usuario_editarperfil', res.Arrastre|merge({ 'id': res.Entidad.id })) }}"
        	class="btn btn-default"><i class="fa fa-user"></i> Perfil</a>
    {% endif %}
{% endblock pagina_acciones2 %}
