{% macro listarcondiciones(tramite, nivel) %}
{% if tramite.EstadosRequisitos|length > 0 %}
	<ul class="list-unstyled">
	{% for EstadoRequisito in tramite.EstadosRequisitos %}
		{% if EstadoRequisito.EsNecesario %}
		    {% if EstadoRequisito.AsociacionRequisito.Requisito.EsCondicion %}
				<li><i class="fa fa-square-o"></i> {{ EstadoRequisito.AsociacionRequisito }}
				{% if EstadoRequisito.AsociacionRequisito.Requisito.Obs %}
					<p class="col-sm-offset-1 text-muted">{{ EstadoRequisito.AsociacionRequisito.Requisito.Obs }}</p>
				{% endif %}
				</li>
			{% elseif EstadoRequisito.AsociacionRequisito.Requisito.EsTramite and EstadoRequisito.Subtramite %}
				<li class="hidden">Para {{ EstadoRequisito.Subtramite.TramiteTipo }}</li>
				{{ _self.listarcondiciones(EstadoRequisito.Subtramite, nivel + 1) }}
			{% endif %}
	    {% endif %}
	{% endfor %}
	</ul>	
{% endif %}
{% endmacro %}

{% macro listarrequisitos(tramite, nivel) %}
{% if tramite.EstadosRequisitos|length > 0 %}
	<ul class="list-unstyled">
	{% for EstadoRequisito in tramite.EstadosRequisitos %}
		{% if EstadoRequisito.EsNecesario %}
			
		    {% if EstadoRequisito.AsociacionRequisito.Requisito.EsExterno %}
				<li><i class="fa fa-square-o"></i> {{ EstadoRequisito.AsociacionRequisito }}
				{% if EstadoRequisito.AsociacionRequisito.Requisito.Obs %}
					<p class="col-sm-offset-1 text-muted">{{ EstadoRequisito.AsociacionRequisito.Requisito.Obs }}</p>
				{% endif %}
				</li>
			{% elseif EstadoRequisito.AsociacionRequisito.Requisito.EsTramite and EstadoRequisito.Subtramite %}
				<li class="hidden">Para {{ EstadoRequisito.Subtramite.TramiteTipo }}</li>
				{{ _self.listarrequisitos(EstadoRequisito.Subtramite, nivel + 1) }}
			{% endif %}
			
	    {% endif %}
	{% endfor %}
	</ul>	
	
	{% if app.environment == 'deva' %}
    	<h3>Documentación no requisitoria</h3>
    	{% for EstadoRequisito in tramite.EstadosRequisitos %}
    	    {% if EstadoRequisito.EsNecesario == false %}
    		<li>
    			<i class="fa fa-minus-square-o"></i> <del>{{ EstadoRequisito.AsociacionRequisito }}</del>
    	    	<p class="help-text">{{ EstadoRequisito.AsociacionRequisito.Obs }}
    	    	<span class="text-danger">Debug: La condición a evaluar es {{ EstadoRequisito.ExplicarCondicion }}</span>
    	    	</p>
    	    </li>
    	    {% endif %}
    	{% endfor %}
    {% endif %}
{% endif %}
{% endmacro %}

{% macro mostrarrequisito(estadoreq) %}
{% if estadoreq.AsociacionRequisito.Requisito.Obs %}<p>{{ estadoreq.AsociacionRequisito.Requisito.Obs }}</p>{% endif %}
{% if estadoreq.AsociacionRequisito.Requisito.Lugar or estadoreq.AsociacionRequisito.Requisito.Url %}<p class="text-info">{% endif %}
{% if estadoreq.AsociacionRequisito.Requisito.Lugar %}Se obtiene en <strong>{{ estadoreq.AsociacionRequisito.Requisito.Lugar }}</strong>{% endif %}
{% if estadoreq.AsociacionRequisito.Requisito.Url %}[ {{ estadoreq.AsociacionRequisito.Requisito.Url }} ]{% endif %}
{% if estadoreq.AsociacionRequisito.Requisito.Lugar or estadoreq.AsociacionRequisito.Requisito.Url %}</p>{% endif %}
{% endmacro %}
